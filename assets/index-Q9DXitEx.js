const N="npm2url/dist/index.cjs",k={jsdelivr:t=>`https://cdn.jsdelivr.net/npm/${t}`,unpkg:t=>`https://unpkg.com/${t}`};async function C(t,e){const n=await fetch(t,{signal:e});if(!n.ok)throw n;await n.text()}class K{constructor(){this.providers={...k},this.provider="jsdelivr"}async getFastestProvider(e=5e3,n=N){const r=new AbortController;let s=0;try{return await new Promise((o,i)=>{Promise.all(Object.entries(this.providers).map(async([a,j])=>{try{await C(j(n),r.signal),o(a)}catch{}})).then(()=>i(new Error("All providers failed"))),s=setTimeout(i,e,new Error("Timed out"))})}finally{r.abort(),clearTimeout(s)}}async findFastestProvider(e,n){return this.provider=await this.getFastestProvider(e,n),this.provider}setProvider(e,n){n?this.providers[e]=n:delete this.providers[e]}getFullUrl(e,n=this.provider){if(e.includes("://"))return e;const r=this.providers[n];if(!r)throw new Error(`Provider ${n} not found`);return r(e)}}class W{constructor(){this.listeners=[]}tap(e){return this.listeners.push(e),()=>this.revoke(e)}revoke(e){const n=this.listeners.indexOf(e);n>=0&&this.listeners.splice(n,1)}revokeAll(){this.listeners.splice(0)}call(...e){for(const n of this.listeners)n(...e)}}const A={"&":"&amp;","<":"&lt;",'"':"&quot;"};function p(t){return t.replace(/[&<"]/g,e=>A[e])}function P(t){return t.replace(/<(\/script>)/g,"\\x3c$2")}function h(t,e){const n=e?Object.entries(e).map(([r,s])=>{if(!(s==null||s===!1))return r=` ${p(r)}`,s===!0?r:`${r}="${p(s)}"`}).filter(Boolean).join(""):"";return`<${t}${n}>`}function T(t){return`</${t}>`}function c(t,e,n){return e==null?h(t,n):h(t,n)+(e||"")+T(t)}function $(t,e){const n=e.map(r=>typeof r=="function"?r.toString():JSON.stringify(r??null)).join(",");return`(${t.toString()})(${n})`}function X(t,e){return t.map(n=>{if(n.type==="script"){const{textContent:r,...s}=n.data;return c("script",r||"",s)}if(n.type==="iife"){const{fn:r,getParams:s}=n.data;return c("script",P($(r,(s==null?void 0:s(e))||[])))}return""})}function Q(t){return t.map(e=>e.type==="stylesheet"?c("link",null,{rel:"stylesheet",...e.data}):c("style",e.data))}const E=Math.random().toString(36).slice(2,8);let y=0;function Z(){return y+=1,`mm-${E}-${y}`}function tt(){}function et(t,e){const n=(r,s)=>e(r,()=>{var o;return(o=r.children)==null?void 0:o.map(i=>n(i,r))},s);return n(t)}function nt(t,...e){const n=(t||"").split(" ").filter(Boolean);return e.forEach(r=>{r&&n.indexOf(r)<0&&n.push(r)}),n.join(" ")}function rt(t){if(typeof t=="string"){const n=t;t=r=>r.tagName===n}const e=t;return function(){let r=Array.from(this.childNodes);return e&&(r=r.filter(s=>e(s))),r}}function st(t,e){return(...n)=>e(t,...n)}function S(){const t={};return t.promise=new Promise((e,n)=>{t.resolve=e,t.reject=n}),t}function x(t){const e={};return function(...r){const s=`${r[0]}`;let o=e[s];return o||(o={value:t(...r)},e[s]=o),o.value}}/*! @gera2ld/jsx-dom v2.2.2 | ISC License */const m=1,b=2,F="http://www.w3.org/2000/svg",u="http://www.w3.org/1999/xlink",I={show:u,actuate:u,href:u},O=t=>typeof t=="string"||typeof t=="number",_=t=>(t==null?void 0:t.vtype)===m,L=t=>(t==null?void 0:t.vtype)===b;function M(t,e,...n){return e=Object.assign({},e,{children:n.length===1?n[0]:n}),H(t,e)}function H(t,e){let n;if(typeof t=="string")n=m;else if(typeof t=="function")n=b;else throw new Error("Invalid VNode type");return{vtype:n,type:t,props:e}}function V(t){return t.children}const J={isSvg:!1};function g(t,e){Array.isArray(e)||(e=[e]),e=e.filter(Boolean),e.length&&t.append(...e)}function U(t,e,n){for(const r in e)if(!(r==="key"||r==="children"||r==="ref"))if(r==="dangerouslySetInnerHTML")t.innerHTML=e[r].__html;else if(r==="innerHTML"||r==="textContent"||r==="innerText"||r==="value"&&["textarea","select"].includes(t.tagName)){const s=e[r];s!=null&&(t[r]=s)}else r.startsWith("on")?t[r.toLowerCase()]=e[r]:B(t,r,e[r],n.isSvg)}const D={className:"class",labelFor:"for"};function B(t,e,n,r){if(e=D[e]||e,n===!0)t.setAttribute(e,"");else if(n===!1)t.removeAttribute(e);else{const s=r?I[e]:void 0;s!==void 0?t.setAttributeNS(s,e,n):t.setAttribute(e,n)}}function z(t){return t.reduce((e,n)=>e.concat(n),[])}function f(t,e){return Array.isArray(t)?z(t.map(n=>f(n,e))):d(t,e)}function d(t,e=J){if(t==null||typeof t=="boolean")return null;if(t instanceof Node)return t;if(L(t)){const{type:n,props:r}=t;if(n===V){const o=document.createDocumentFragment();if(r.children){const i=f(r.children,e);g(o,i)}return o}const s=n(r);return d(s,e)}if(O(t))return document.createTextNode(`${t}`);if(_(t)){let n;const{type:r,props:s}=t;if(!e.isSvg&&r==="svg"&&(e=Object.assign({},e,{isSvg:!0})),e.isSvg?n=document.createElementNS(F,r):n=document.createElement(r),U(n,s,e),s.children){let i=e;e.isSvg&&r==="foreignObject"&&(i=Object.assign({},i,{isSvg:!1}));const a=f(s.children,i);a!=null&&g(n,a)}const{ref:o}=s;return typeof o=="function"&&o(n),n}throw new Error("mount: Invalid Vnode!")}function q(t){return d(t)}function l(...t){return q(M(...t))}const R=x(t=>{document.head.append(l("link",{rel:"preload",as:"script",href:t}))}),w={},v={};async function Y(t,e){var n;const r=t.type==="script"&&((n=t.data)==null?void 0:n.src)||"";if(t.loaded||(t.loaded=w[r]),!t.loaded){const s=S();if(t.loaded=s.promise,t.type==="script"&&(document.head.append(l("script",{...t.data,onLoad:()=>s.resolve(),onError:s.reject})),r?w[r]=t.loaded:s.resolve()),t.type==="iife"){const{fn:o,getParams:i}=t.data;o(...(i==null?void 0:i(e))||[]),s.resolve()}}await t.loaded}async function G(t){const e=t.type==="stylesheet"&&t.data.href||"";if(t.loaded||(t.loaded=v[e]),!t.loaded){const n=S();t.loaded=n.promise,e&&(v[e]=t.loaded),t.type==="style"?(document.head.append(l("style",{textContent:t.data})),n.resolve()):e&&(document.head.append(l("link",{rel:"stylesheet",...t.data})),fetch(e).then(r=>{if(r.ok)return r.text();throw r}).then(()=>n.resolve(),n.reject))}await t.loaded}async function ot(t,e){t.forEach(n=>{var r;n.type==="script"&&((r=n.data)!=null&&r.src)&&R(n.data.src)}),e={getMarkmap:()=>window.markmap,...e};for(const n of t)await Y(n,e)}async function it(t){await Promise.all(t.map(e=>G(e)))}function at(t){return{type:"script",data:{src:t}}}function ct(t){return{type:"stylesheet",data:{href:t}}}export{W as H,K as U,X as a,at as b,ct as c,nt as d,et as e,rt as f,Z as g,it as h,ot as l,tt as n,Q as p,st as w};
